| 目錄                          |
| ----------------------------- |
| [關於《搶旗幟》](#關於搶旗幟) |
| [特殊機制](#特殊機制)         |
| [關卡清單](#關卡清單)         |
| [所有關卡](#所有關卡)         |

# 關於《搶旗幟》

一日於班上玩電腦時巧遇《[2 Player Tag](https://www.crazygames.com/game/2-player-tag)》，遊玩後決定自行開發進階版，添入更多功能，《Snag That Flag》（俗謂《搶旗幟》，文均亦用此名）於是問世。

| 標題     | 說明                                                         |
| -------- | ------------------------------------------------------------ |
| 開發者   | Zutek 3134                                                   |
| 玩法     | 玩家一 `WASD`，玩家二 `方向鍵`                               |
| 下載頁面 | [暫不提供](https://github.com/ZutekDL/Snag-That-Flag/releases) |
| 更新日誌 | [點擊前往](https://github.com/ZutekDL/Snag-That-Flag/blob/main/大事記.md) |

# 特殊機制
《搶旗幟》的遊戲方式與《2 Player Tag》大致相同，惟仍存在些許差異，於此列出：

## 壹、遊戲規則
原作遊戲規則係「鬼抓人」，鬼玩家上方由文字「Tag」表示之。時間到時非鬼玩家獲勝。而《搶旗幟》中有三種遊戲模式，[經典](#一經典模式)、[相反](#二相反模式)、[Coin Master](#三Coin-Master-模式)。

### 一、經典模式
由遊戲名稱可知，經典模式之規則係搶旗幟。引用遊戲內簡介：

> 經典模式，遊戲的預設規則。在每關的時間結束以前持有旗子，即可獲勝。此規則適用於所有關卡。

### 二、相反模式
由模式名稱可知，相反模式係經典模式之相反，即非搶旗幟。引用遊戲內簡介：

> 相反模式，與遊戲的預設規則相反。在每關的時間結束以前不持有旗子，即可獲勝。此規則適用於所有關卡。

### 三、Coin Master 模式
特殊遊戲模式，玩家須收集隨機生成之金幣，此遊戲模式僅適用於 `動態關卡` 。引用遊戲內簡介：

> Coin Master 模式，在有限的時間內，收集最多的金幣。持有旗子的玩家可以額外獲得五成金幣。此規則僅適用於特定關卡。



 金幣計算規則如下。

## 貳、設定

遊戲設定客製化程度相當地高。在開始遊戲前，可以選擇循序漸進編輯參數，或是使用現存預設設定。

### 一、預設設定

遊戲內目前內建五種遊戲設定可以直接使用，**前次遊玩**、**奪旌搶旗**、**極速通關**、**掙錢大師**、**廣場追逐**，並且支援客製化的自定義設定。

1. **前次遊玩**：選擇後即可立即使用上次之自定義設定遊玩，若未曾設定，則該按鈕隱藏。
1. **奪旌搶旗**：遊戲最原始的設定，可以說是「預設模式」。
1. **極速通關**：基於**奪旌搶旗**而變，每關皆僅十秒時間。
1. **掙錢大師**：遊玩「Coin Master 模式」時之推薦設定。
1. **廣場追逐**：奔馳於偌大的地圖裡。

> 若欲儲存自定義設定，可遵循以下步驟：
>
> 1. 點擊「複製資料夾位址」。
> 1. 貼入「檔案總管」並往前一個資料夾（`Presets`）。
> 1. 複製「`PreviousSettings.json`」，貼入「`Custom`」資料夾內並重新命名，且建議國文名稱。
> 1. 回到遊戲點擊「重新整理」。
> 1. 如此剛貼上之設定便旋即出現。

### 二、自定義設定

倘內建設定皆不符心意，可以嘗試客製化琳瑯滿目的設定。註：標題留空者同上。

| 標題       | 名稱             | 功能                                                         |
| ---------- | ---------------- | ------------------------------------------------------------ |
| 遊戲模式   | 經典模式         | 洽「**[特殊機制之壹之一](#一經典模式)**」。                  |
|            | 相反模式         | 洽「**[特殊機制之壹之二](#二相反模式)**」。                  |
|            | Coin Master 模式 | 洽「**[特殊機制之壹之三](#三coin-master-模式)**」。          |
| 選擇關卡   | 全選／全不選     | 顧名思義，係開啟／關閉類別內所有關卡。                       |
|            | 甲／乙           | 分兩頁，上頁含 `甲類關卡`，下頁含 `乙、丙類關卡`。注意，`甲類關卡` 於「Coin Master 模式」被選擇時關閉。 |
| 關卡設定   | 關卡時長         | 每關卡之時長，範圍為 10 至 60 秒。                           |
| 玩家設定   | 移動速度         | 玩家之移動速度，範圍為 1 至 1.5 倍速。注意，持旗玩家擁有所選倍速再疊加 1.2 倍。 |
|            | 連續跳躍         | 玩家可連續跳躍數，俗稱「ｎ段跳」。如連續「跳躍一次」便等於「二段跳」。 |
|            | 反彈程度         | 零維數據，０即關閉（無反彈），１即開啟（有反彈）。           |
| 時間球設定 | 生成機率         | 時間球於 `乙、丙類關卡` 中的出現機率，範圍為 0% 至 100%。此設定亦使用於「Coin Master 模式」之金幣生成率。 |
|            | 影響秒數         | 每顆時間球被收集後所影響之秒數。注意，有使用限制，請洽「**[參、收集物](#參收集物)**」之「**時間球**」；該設定於「Coin Master 模式」被選擇時關閉。 |



## 參、收集物
原作並無任何「收集物」。

| 名稱     | 功能                                                         | 限制                                                         |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 時間球   | 收集後可影響遊戲時間。鑑於持旗者希關卡儘快結束，而無旗者冀時間之長，爰持旗扣秒，反之加秒。影響秒數由遊戲前設定之。 | 僅於 `乙、丙類關卡` 生成，且「Coin Master 模式」中一律不生成。為保障遊戲體驗，特定時間後加秒無效。 |
| 金幣     | 收集後可增加金幣數量。金幣計算方法請洽「**[特殊機制之壹之三](#三coin-master-模式)**」。 | 僅於「Coin Master 模式」中生成。                             |
| 子彈     | 玩家碰撞後三秒電暈效果，期間不可移動。                       | 出現於 `L9：Boss 關卡１`。1120311 更新中 `乙、丙類關卡` 皆有低機率自然生成。 |
| 水龍頭   | 改變水面高低。                                               | 僅出現於 `L5：水關卡２`。                                    |
| 反向     | 操作左右相反。                                               | 僅出現於 `L8：反向關卡`。                                    |
| 對調     | 如名，兩玩家位置互換。                                       | 僅於 `丙類關卡` 生成。                                       |
| 隨機移動 | 此收集物生成於關卡底部，玩家觸發後便隨機將之傳送至關卡上部。 | 僅於 `丙類關卡` 生成。                                       |
| 加成     | 分為速度加成與跳躍加成。                                     | 僅出現於 `L15：廣場關卡`。                                   |

## 肆、關卡限定機關
原作中四個關卡皆有特定機關，惟《搶旗幟》中將某些應用於其他關卡。即便如此，仍有某些機關僅出現一次。

| 機關首度出現之關卡 | 名稱     | 介紹                                                         |
| ------------------ | -------- | ------------------------------------------------------------ |
| `L2：海盜船關卡１` | 跳板     | 使玩家跳得更高。原作中僅出現於 `第二關`，現廣泛用於各關卡。  |
| `L2：海盜船關卡１` | 船帆     | 船帆顏色係對應目前獲勝玩家之顏色。原作中並無此機制，現僅出現於海盜船關卡１２３。 |
| `L3：水關卡１`     | 水       | 長按跳躍鍵可以向上「游」。原作中僅出現於 `第三關`，現用水關卡１２３。 |
| `L4：傳送門關卡１` | 傳送門   | 進入入口後傳送至相對應的出口。原作中僅出現於 `第四關`，現用傳送門關卡１２３４。 |
| `L5：水關卡２`     | 水龍頭   | 參見「**[參、收集物](#參收集物)**」之「**水龍頭**」。        |
| `L7：樓梯關卡`     | 樓梯     | 樓梯無盡上升，玩家須不停向下移動。碰到天地，則「互換旗子」或「扣雙倍時間球影響秒數」。 |
| `L9：Boss 關卡１`  | 子彈     | Boss 將發射子彈攻擊玩家，被攻擊玩家三秒無法移動。原為此關專屬，後於所有 `動態關卡` 中低機率生成。 |
| `Boss 關卡２`      | 雷射光   | Boss 對玩家發射雷射光，傷害與樓梯天地相同。                  |
| `岩漿關卡`         | 岩漿     | 於山腳至半山腰來回漲退，碰到後將玩家傳送至山頂。             |
| `L8：反向關卡`     | 反向     | 參見「**[參、收集物](#參收集物)**」之「**反向**」。          |
| `L14：電梯關卡`    | 對調     | 參見「**[參、收集物](#參收集物)**」之「**對調**」。          |
| `L14：電梯關卡`    | 隨機傳送 | 參見「**[參、收集物](#參收集物)**」之「**隨機傳送**」。      |
| `L15：廣場關卡`    | 加成     | 參見「**[參、收集物](#參收集物)**」之「**加成**」。          |

## 伍、分數結算方法

```
令 x 為 玩家一分數
令 y 為 玩家二分數

玩家分數差 z = x - y
總分 n = x + y

預設 winMode = 3

若 z > 0（玩家一分數大於玩家二）
　若 z > n × 20%（玩家一贏玩家二總分之兩成以上）
　　若 y > 0（玩家二分數大於０）則 winMode = 0
　　反之（玩家二分數等於０）winMode = 1
　反之（玩家一與玩家二分數之差小於總分之兩成）winMode = 2
若 |z| > 0（玩家一分數小於玩家二）
　若 |z| > n × 20%（玩家二贏玩家一總分之兩成以上）
　　若 x > 0（玩家一分數大於０）則 winMode = 0
　　反之（玩家一分數等於０）winMode = 1
　反之（玩家一與玩家二分數之差小於分之兩成）winMode = 2

winMode 即為所求，０為「完勝（彩冠）」、１為「獲勝（金冠）」、２為「險勝（銀冠）」、３為「平手」。
```

結論：輸家分數為０，對方完勝；兩方分數相差大於總分之兩成，贏方獲勝，反之險勝；雙方分數相同，平手。而玩家一二分數有以下兩種模式：

### 一、經典與相反模式

依照經典模式獲勝規則，關卡倒計時結束時，持旗者獲勝，並得一分；相反模式則相反，關卡倒計時結束時，非持旗者獲勝，並得一分。

### 二、Coin Master 模式

令 `int x = 原有金幣量`；

令 `int y = 此關金幣量`；

令 `bool b = 是否持旗子`；

則 `總金幣量 = x + (int)(y * (b ? 1.5f : 1f))`。

意即若該關持有旗子，該關金幣量加五成（四捨五入），且不影響已有金幣量。

# 關卡清單
- 《搶旗幟》共十五關。
- 關卡分為 `甲類`、`乙類`、`丙類`。
- 下表排序係參照遊戲內選關之排序。

## 甲類

1. `L1：草關卡１`
1. `L2：海盜船關卡１`
1. `L3：水關卡１`
1. `L4：傳送門關卡１`
1. `L5：水關卡２`
1. `L10：海盜船關卡３`
1. `L8：反向關卡`

## 乙類

1. `L7：樓梯關卡`
1. `L9：Boss 關卡１`
1. `L6：傳送門關卡２`
1. `L11：水關卡３`
1. `L12：傳送門關卡４`
1. `L13：國旗關卡`

## 丙類

1. `L14：電梯關卡`
1. `L15：廣場關卡`

# 所有關卡

> 注意：此章節含有**已移除內容**。

### L1：草關卡１
| 標題     | 內容       |
| -------- | ---------- |
| 關卡來源 | 復刻自原作 |
| 加入時間 | 1091031    |
| 關卡類別 | 甲類       |



---

### L2：海盜船關卡１
| 標題         | 內容       |
| ------------ | ---------- |
| 關卡來源     | 復刻自原作 |
| 加入時間     | 1091031    |
| 關卡類別     | 甲類       |
| 新增特殊機關 | 跳板、船帆 |

---

### L3：水關卡１
| 標題         | 內容         |
| ------------ | ------------ |
| 關卡來源     | 復刻自原作   |
| 加入時間     | 1091031      |
| 關卡類別     | 甲類         |
| 新增特殊機關 | 水           |
| 軼事         | 浮木會上下漂 |

---

### L4：傳送門關卡１
| 標題         | 內容                                       |
| ------------ | ------------------------------------------ |
| 關卡來源     | 復刻自原作                                 |
| 加入時間     | 1091031                                    |
| 關卡類別     | 甲類                                       |
| 新增特殊機關 | 傳送門                                     |
| 軼事         | 遊玩時為深藍色背景，而非原著之淺灰白色調。 |

---

### 草關卡２
| 標題     | 內容                                                         |
| -------- | ------------------------------------------------------------ |
| 關卡來源 | 原創                                                         |
| 加入時間 | 1091107（1120321 移除）                                      |
| 關卡類別 | 甲類                                                         |
| 軼事     | 第一個原創關卡；第一個有移動地板的關卡；基於 `L1：草關卡１` 而改。 |

---

### 海盜船關卡２
| 標題     | 內容                           |
| -------- | ------------------------------ |
| 關卡來源 | 原創                           |
| 加入時間 | 1091107（1120321 移除）        |
| 關卡類別 | 甲類                           |
| 軼事     | 基於 `L2：海盜船關卡１` 而改。 |

---

### L5：水關卡２
| 標題         | 內容                                               |
| ------------ | -------------------------------------------------- |
| 關卡來源     | 原創                                               |
| 加入時間     | 1091107                                            |
| 關卡類別     | 甲類                                               |
| 新增特殊機關 | 水龍頭                                             |
| 軼事         | 第一個有旋轉平臺的關卡；基於 `L3：水關卡１` 而改。 |

---

### L6：傳送門關卡２
| 標題     | 內容                                                       |
| -------- | ---------------------------------------------------------- |
| 關卡來源 | 原創                                                       |
| 加入時間 | 1091107                                                    |
| 關卡類別 | 乙類（原為甲類，1120321 更新時歸為乙類）                   |
| 軼事     | 第一個有水平旋轉平臺的關卡；基於 `L4：傳送門關卡１` 而改。 |

---

### L7：樓梯關卡
| 標題         | 內容                                                         |
| ------------ | ------------------------------------------------------------ |
| 關卡來源     | 原創                                                         |
| 加入時間     | 1091110                                                      |
| 關卡類別     | 乙類                                                         |
| 新增特殊機關 | 樓梯                                                         |
| 軼事         | 第一個 `乙類關卡`；第一個無止盡的關卡；借鑒《小朋友下樓梯》。 |

---

### L8：反向關卡

| 標題         | 內容                                     |
| ------------ | ---------------------------------------- |
| 關卡來源     | 原創                                     |
| 加入時間     | 1100222                                  |
| 關卡類別     | 甲類（原為甲類，1120321 更新時歸為甲類） |
| 新增特殊機關 | 反向                                     |

---

### L9：Boss 關卡１

| 標題         | 內容                                                         |
| ------------ | ------------------------------------------------------------ |
| 關卡來源     | 原創                                                         |
| 加入時間     | 1100222                                                      |
| 關卡類別     | 乙類                                                         |
| 新增特殊機關 | 子彈                                                         |
| 軼事         | 第一個 Boss 關卡，Boss 會隨機生成時間球或金幣並隨機攻擊玩家，被攻擊玩家三秒內不能移動。 |

---

### L10：海盜船關卡３

| 標題     | 內容                   |
| -------- | ---------------------- |
| 關卡來源 | 原創                   |
| 加入時間 | 1100222                |
| 關卡類別 | 甲類                   |
| 軼事     | 第一個不左右對稱關卡。 |

---

### Boss 關卡２

| 標題         | 內容                                                         |
| ------------ | ------------------------------------------------------------ |
| 關卡來源     | 原創                                                         |
| 加入時間     | 1100302（1120321 移除）                                      |
| 關卡類別     | 乙類                                                         |
| 新增特殊機關 | 雷射光                                                       |
| 軼事         | 第二個 Boss 關卡，Boss 會持旗子的玩家，攻擊效果與 `L7：樓梯關卡` 的天地相同。 |

---

### L11：水關卡３
| 標題     | 內容                                 |
| -------- | ------------------------------------ |
| 關卡來源 | 原創                                 |
| 加入時間 | 1100302                              |
| 關卡類別 | 乙類                                 |
| 軼事     | 中間的門會闔上，將地圖上下部份隔開。 |

---

### 傳送門關卡３
| 標題     | 內容                    |
| -------- | ----------------------- |
| 關卡來源 | 原創                    |
| 加入時間 | 1100302（1120321 移除） |
| 關卡類別 | 乙類                    |

---

### 岩漿關卡
| 標題         | 內容                    |
| ------------ | ----------------------- |
| 關卡來源     | 原創                    |
| 加入時間     | 1100302（1120321 移除） |
| 關卡類別     | 乙類                    |
| 新增特殊機關 | 岩漿                    |

---

### L12：傳送門關卡４
| 標題     | 內容                         |
| -------- | ---------------------------- |
| 關卡來源 | 原創                         |
| 加入時間 | 1100302                      |
| 關卡類別 | 乙類                         |
| 軼事     | 關卡頂部有一來回移動之板子。 |

---

### L13：國旗關卡
| 標題     | 內容                           |
| -------- | ------------------------------ |
| 關卡來源 | 原創                           |
| 加入時間 | 1100302                        |
| 關卡類別 | 乙類                           |
| 軼事     | 「青天」部份為特殊機關「水」。 |

---

### L14：電梯關卡

| 標題         | 內容                       |
| ------------ | -------------------------- |
| 關卡來源     | 原創                       |
| 加入時間     | 1120311                    |
| 關卡類別     | 丙類                       |
| 新增特殊機關 | 對調、隨機傳送             |
| 軼事         | 基於 `L8：反向關卡` 而改。 |

---

### L15：廣場關卡

| 標題         | 內容                     |
| ------------ | ------------------------ |
| 關卡來源     | 原創                     |
| 加入時間     | 1120316                  |
| 關卡類別     | 丙類                     |
| 新增特殊機關 | 加成                     |
| 軼事         | 關卡水平與垂直距離之最。 |

